<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../layer-v3.0.1/layer/skin/default/layer.css"/>
    <link rel="stylesheet" href="../css/main.css"/>

    <link rel="stylesheet" href="./cssContent/cssContentText/cssLayout/cssLayout.css"/>
    <link rel="stylesheet" href="./cssContent/cssContentText/cssImages/cssImages.css"/>
    <link rel="stylesheet" href="./htmlContent/htmlContentText/input/input.css"/>
    <link rel="stylesheet" href="./cssContent/cssContentText/cssImages/cssImages.css"/>
    <link rel="stylesheet" href="./cssContent/cssContentText/response/response.css"/>
    <link rel="stylesheet" href="./jsContent/jsContentText/openWindow/openWindow.css"/>
    <link rel="stylesheet" href="./jsContent/jscontenttext/plugin/plugin.css"/>

    <script src="../javascript/angular-1.2.19/angular.min.js"></script>
    <script src="../javascript/angular-1.2.19/angular-ui-router.js"></script>
    <script src="../javascript/jquery-2.1.1.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <script src="../layer-v3.0.1/layer/layer.js"></script>
    <script src="../js/socket.io.js"></script>
    <script src="../js/main.js"></script>

    <script src="./jsContent/jsContentText/canvas/canvas.js"></script>
    <script src="./jsContent/jsContentText/inside-object/inside-object.js"></script>
    <script src="./jsContent/jsContentText/window-object/window-object.js"></script>
    <script src="./htmlContent/htmlContentText/input/input.js"></script>
    <script src="./jsContent/jsContentText/closure/closure.js"></script>
    <script src="./jsContent/jsContentText/object/object.js"></script>
    <script src="./jsContent/jsContentText/openWindow/openWindow.js"></script>
    <script src="./jsContent/jsContentText/plugin/plugin.js"></script>
    <script src="./jsContent/jsContentText/plugin/luoliangPlug.js"></script>
    <script src="./tipsContent/tipsContentText/TCP/TCP.js"></script>

</head>
<body ng-app="myApp">
    <nav class="nav">
        <h3 class="userTitle">显示登录用户信息</h3>
        <div class="userMsg">
            <p class="username">
                用户名：<span id="username"></span>
            </p>
            <p class="loginOut" onclick="loginOut()">
                退出
            </p>
        </div>
    </nav>

    <div class="content">
        <!-- 一级菜单 -->
        <div class="firstIterm">
            <ul>
                <li ui-sref="htmlContent" ui-sref-active="active">html部分</li>
                <li ui-sref="cssContent" ui-sref-active="active">css部分</li>
                <li ui-sref="jsContent" ui-sref-active="active">js部分</li>
                <li ui-sref="frameworkContent" ui-sref-active="active">框架部分</li>
                <li ui-sref="tipsContent" ui-sref-active="active">工具</li>
            </ul>
        </div>

        <!--内容展示区域-->
        <div class="mainShow" ui-view></div>
    </div>

    <footer>
        <div>技术指标：Nodejs+Express框架，视图ui-rooter,用户数据存储在网络平台leanCloud中。注意：随后启用的本地服务器+本地数据存储，nodejs + mongoseDB/MYSQL。所以必须在本地搭建数据库才能使用。</div>
        <div>其中mongodb的 数据库为luoliang，登录的集合为luoliang</div>
    </footer>
</body>
<!--<script src="https://cdn1.lncld.net/static/js/av-min-1.5.3.js"></script>-->
<script>
    window.onload = function(){
        var username = window.localStorage.getItem("username");
        if(username){
            document.getElementById("username").innerHTML = username;
        }else{
            window.location.href = "../login.html";
        }
    }

    // 初始化
//    var APP_ID = 'BjwOUME1CT71QVOHVHjTwUa2-gzGzoHsz';
//    var APP_KEY = 'WPmhPBuqwWnvSAaQmvhfm0lQ';
//    AV.init({
//        appId: APP_ID,
//        appKey: APP_KEY,
//        region: 'leancloud.cn'
//    });

    //验证登录用户名,如果存在则显示页面，如果不存在就返回登录页面
//    var currentUser = AV.User.current();
//    if (currentUser) {
//        //currentUser中没有用户名的信息？？？
//        //console.log(currentUser);
////        var url = location.href.split("?")[1].split("=")[1];
////        document.getElementById("username").innerHTML = url;
//    }
//    else {
//        //currentUser 为空时跳转到登录界面…
//        window.open("../login.html","_self");
//    }


//    用户登出
    function loginOut(){
//        AV.User.logOut();
//        // 现在的 currentUser 是 null 了
//        var currentUser = AV.User.current();
//        if(currentUser == null){
//            window.open("../index.html","_self");
//
//        }

//        本地数据库方法
        window.localStorage.removeItem("username");
        window.location.href = "../login.html";
    }
</script>
</html>
