/**
 * Created by acer on 2017/3/25.
 */

app.controller("inputController",function(){
    // 效果一
    var checkbox1Ele = document.getElementById("checkbox1");
    var label1Ele = document.getElementsByClassName("label1")[0];
    label1Ele.onclick = function(){
        if(checkbox1Ele.checked == true){
            label1Ele.style.left = "12px";
            label1Ele.style.background = "#ddd";
            checkbox1Ele.removeAttribute("checked");
        }else{
            label1Ele.style.left = "80px";
            label1Ele.style.background = "#26ca28";
            checkbox1Ele.setAttribute("checked","true");
        }
    }
    //效果二
    var Ele = document.getElementsByClassName("checkbox2")[0];
    var checkbox2Ele = document.getElementById("checkbox2");
    Ele.onclick = function(){
        var status = Ele.innerHTML;
        //console.log(status);
        if(status == "v"){
            Ele.innerHTML = "";
            Ele.style.textAlign = "center";
            Ele.style.lineHeight = "30px";
            checkbox2Ele.checked = false;
        }else{
            Ele.innerHTML = "v";
            Ele.style.textAlign = "center";
            Ele.style.lineHeight = "30px";
            checkbox2Ele.checked = true;
        }
    }

    //input上传文件
    // 批注：在操作字符串（String）类型的时候，startsWith(anotherString)和endsWith(anotherString)是非常好用的方法。其中startsWith判断当前字符串是否以anotherString作为开头，而endsWith则是判断是否作为结尾
    var fileInput = document.getElementById('choseImg'),
        info = document.getElementById('showMsg'),
        preview = document.getElementById('showFile');

    // 监听change事件:
    fileInput.addEventListener('change', function () {
        preview.style.backgroundImage = '';
        // 检查文件是否选择:
        if (!fileInput.value) {
            info.innerHTML = '没有选择文件';
            return;
        }
        // 获取File引用对象:
        var file = fileInput.files[0];
        console.log(file);
        // 获取File信息:
        info.innerHTML = '文件: ' + file.name + '<br>' +
            '大小: ' + file.size + '<br>' +
            '修改: ' + file.lastModifiedDate;
        if (file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {
            alert('不是有效的图片文件!');
            return;
        }
        // 读取文件:
        var reader = new FileReader();
        reader.onload = function(e) {
            var data = e.target.result; // 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'
            preview.style.backgroundImage = 'url(' + data + ')';
            preview.style.backgroundSize = "100% 100%";
            preview.style.display = "block";
        };
        // 以DataURL的形式读取文件:
        reader.readAsDataURL(file);
    });

    //input中的input事件，中文出发方式
    $('#inputType').on('input', function () {
        if ($(this).prop('comStart')) {
            return;    // 中文输入过程中不截断
        }
        var value = $(this).val();
        console.log(value.length);
        if (value.length >= 20) {
            $("#secondInput").focus();
        }
    }).on('compositionstart', function () { //compositionstart判断中文输入是否开始
        $(this).prop('comStart', true);
        console.log('中文输入：开始');
    }).on('compositionend', function () {
        $(this).prop('comStart', false);
        console.log('中文输入：结束');
    });
})