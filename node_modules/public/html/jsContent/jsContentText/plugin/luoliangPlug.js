/**
 * Created by ly on 2017/5/2.
 */
//原生js插件封装
(function($){
    //弹窗组件
    var layer = function(){

    };
    layer.prototype = {
        //提示性弹框，3s后自动消失
        tips:function(){

        },
        // 确定/取消选择弹框
        alert:function(){

        },
        //通过iframe加载的弹框
        iframe:function(){

        }
    }
    window.layer = layer; //暴露出去


    //tab选项卡插件
    var Tab = function(config,selectId){
        var newConfig; //整合后的配制信息

        //默认配制参数
        this.config = {
            eventType:"click",  //定义事件类型
            animate:"fade",  //定义动画效果
            invoke:"1",  //默认展示第几个
            auto:"1"  //定义动画时间 0:不自动播放，1:默认自动播放（时长5000），传具体参数
        }

        if(config && config !=""){
            newConfig = this.getConfig(config);
        }else{

        }

        //绑定方法
        $(selectId).find(".tab-nav-item").bind(this.config.eventType,function(){
            $(this).addClass("tab-nav-active").siblings().removeClass("tab-nav-active");
            var index = $(this).index();
            $(".tab-content li").removeClass("tab-content-active").eq(index).fadeIn().siblings().fadeOut();
        })

        //自动播放效果
        if(this.config.auto == "0"){

        }else if(this.config.auto == "1"){
            this.autoPlay("5000");
        }else{
            this.autoPlay();
        }

    };
    Tab.prototype = {
        //获取配制参数信息
        getConfig:function(config){
            return $.extend(this.config,config);  //jquery的$.extend扩展方法，把第二个参数中的属性和值往第一个参数中扩展，有就覆盖，没有就添加.
        },
        //自动播放(轮播)
        autoPlay:function(setTime){
            var totalTime;
            if(setTime){
                totalTime = setTime;
            }else{
                totalTime = this.config.auto;
            };

            var index = 0; //循环时间
            var indexPic = 0 //循环图片
            setInterval(function(){
                ++index;
                if(index*1000 == totalTime){
                    if(indexPic <= $(".tab-content").find("li").length - 2){
                        ++indexPic;
                    }else{
                        indexPic = 0;
                    }
                    $(".tab-nav li").eq(indexPic).addClass("tab-nav-active").siblings().removeClass("tab-nav-active");
                    $(".tab-content li").eq(indexPic).fadeIn().siblings().fadeOut();
                    index = 0;
                }
            },1000);
        }
    };
    window.Tab = Tab;  //暴露出去

})(jQuery);